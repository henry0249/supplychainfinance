(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"bio+":function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return H});a("Telt");var n,l,r,o,c=a("Tckk"),s=a("jehZ"),i=a.n(s),u=(a("5NDa"),a("5rEg")),m=(a("14J3"),a("BMrR")),d=(a("P2fV"),a("NJEC")),p=(a("+L6B"),a("2/Rp")),h=(a("Pwec"),a("CtXQ")),f=(a("jCWc"),a("kPKH")),E=(a("sPJy"),a("bE4q")),y=(a("miYZ"),a("tsqr")),g=(a("2qtc"),a("kLXV")),_=a("2Taf"),N=a.n(_),b=a("vZ4D"),v=a.n(b),k=a("l4Ni"),T=a.n(k),C=a("ujKo"),w=a.n(C),P=a("MhPg"),D=a.n(P),x=(a("p0pE"),a("ozfa"),a("MJZm")),S=(a("OaEy"),a("2fM7")),K=(a("y8nQ"),a("Vl3Y")),B=a("q1tI"),I=a.n(B),L=a("fNeP"),j=a.n(L),q=a("wY1l"),M=a.n(q),z=a("V9U9"),F=(a("kLkQ"),a("wd/R")),O=a.n(F),Y=a("WeCa"),J=a("3a4m"),U=a.n(J),V=a("bKel"),Z=a.n(V),R=a("/MKj"),W=K["a"].Item,X=(S["a"].Option,x["a"].TreeNode),H=(n=K["a"].create(),l=Object(R["c"])(function(e){var t=e.global;e.loading;return{global:t}}),Z()(r=n(r=l((o=function(e){function t(e){var a;return N()(this,t),a=T()(this,w()(t).call(this,e)),a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onCheck=function(e,t){console.log(e),console.log(t);var n=[];e.map(function(e){var t=e.split("-");n.push({roleId:t[0],roleType:t[1],level:t[2],pid:t[3],subSys:t[4],roleName:t[5],title:t[6]})}),console.log(n),a.setState({newParams:n}),a.setState({checkedKeys:e})},a.onSelect=function(e,t){console.log("onSelect",t),a.setState({selectedKeys:e})},a.renderTreeNodes=function(e){return e.map(function(e){return e.children?I.a.createElement(X,{title:e.title,key:e.key,dataRef:e},a.renderTreeNodes(e.children)):I.a.createElement(X,e)})},a.handleCancel=function(){g["a"].confirm({title:"\u53d6\u6d88\u540e\u672a\u4fdd\u5b58\u5185\u5bb9\u5c06\u4f1a\u4e22\u5931",content:"\u4f60\u8fd8\u8981\u7ee7\u7eed\u5417\uff1f",onOk:function(){U.a.goBack()},onCancel:function(){}})},a.handleChange=function(e,t){console.log(e),e&&a.setState({userPhoto:e})},a.bannedUser=function(e){console.log(e);var t=null;1===e?t=0:0===e&&(t=1);var n="userId=".concat(a.id,"&status=").concat(t);Object(z["c"])(n).then(function(e){e&&0===e.code?(y["a"].success(e.message),U.a.goBack()):y["a"].error(e.message)})},a.handleSubmit=function(){var e=a.props.form.validateFields,t=a.state,n=t.userPhoto;t.newParams;e(function(e,t){if(!e){var a={};n&&(a["userPhoto"]=n),t.userName&&(a["userName"]=t.userName),t.email&&(a["email"]=t.email),t.fullName&&(a["fullName"]=t.fullName),t.accountDescription&&(a["accountDescription"]=t.accountDescription),Object(z["a"])(a).then(function(e){e&&0===e.code?(y["a"].success(e.msg),U.a.push("/user")):y["a"].error(e.msg)})}})},a.userNameChange=function(){var e=a.props.form.validateFields;e(["username"],function(e,t){e?a.setState({userNameTrue:!0}):a.setState({userNameTrue:!1})})},a.state={data:{},refresh:!1,ButtonLoading:!1,userPhoto:"",userDetail:{},groupList:[],userNameTrue:null,expandedKeys:[],autoExpandParent:!0,selectedKeys:[],forbit:1,detail:null,role:null,com:null,tree:null,checkedKeys:[],checkKeys:[],oldCheckKeys:[],unCheckKeys:[],addList:[],deleteList:[],newParams:[]},a.id=e.location.query.id||null,a.enterType=e.location.query.enterType||null,a.orgId=e.location.query.orgId||null,a}return D()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this;if(this.id){var t=this.props.form.setFieldsValue;Object(z["d"])(this.id).then(function(a){if(a&&0===a.code){console.log(a);var n=a.data,l=n.fullName,r=n.userName,o=n.email,c=n.accountDescription;t({fullName:l,userName:r,email:o,accountDescription:c}),e.setState({userDetail:a.data,userNameTrue:!0},function(){})}})}}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=(this.props.location.query.type,this.state),n=(a.content,a.data,a.ButtonLoading),l=(a.groupList,a.userDetail),r=(a.userNameTrue,a.role,a.com,a.tree,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:10}}}),o=O()(new Date).format("YYYY-MM-DD");return I.a.createElement("div",{className:j.a.container},I.a.createElement("div",{className:j.a.crumb},I.a.createElement(m["a"],{gutter:24},I.a.createElement(f["a"],{span:19},I.a.createElement(E["a"],null,I.a.createElement(E["a"].Item,null,I.a.createElement(M.a,{to:"/user"},"\u7528\u6237\u7ba1\u7406")),I.a.createElement(E["a"].Item,null,"0"===this.enterType?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237")),I.a.createElement("h2",{style:{marginTop:10,fontWeight:"bold"}},"\u8d26\u6237\u8be6\u60c5"),I.a.createElement("p",null,"\u64cd\u4f5c\uff1a\u53ef\u7f16\u8f91\u3001\u6dfb\u52a0\u548c\u5220\u9664\u7528\u6237\u6743\u9650\u7ec4\u3002")),I.a.createElement(f["a"],{span:5},I.a.createElement("div",null,"\u6700\u540e\u4fee\u6539: ",o),I.a.createElement("div",{style:{margin:"10px 0"}},l.updateName?"\u4fee\u6539\u4eba\uff1a"+l.updateName:""),I.a.createElement("div",null,I.a.createElement(p["a"],{type:"primary",onClick:function(){U.a.goBack()}},I.a.createElement(h["a"],{type:"rollback"}),"\u8fd4\u56de"),"0"===this.enterType&&I.a.createElement(d["a"],{placement:"top",title:0===l.status?I.a.createElement("div",null,I.a.createElement("p",null,"\u542f\u7528\u672c\u8d26\u53f7"),I.a.createElement("p",null,"\u786e\u5b9a\u542f\u7528\u8d26\u6237\u201c\u8d26\u6237\u540d\u79f0".concat(l.fullName,"\u201d\u5417\uff1f"))):I.a.createElement("div",null,I.a.createElement("p",null,"\u7981\u7528\u672c\u8d26\u53f7"),I.a.createElement("p",null,"\u786e\u5b9a\u7981\u7528\u8d26\u6237\u201c\u8d26\u6237\u540d\u79f0".concat(l.fullName,"\u201d\u5417\uff1f"))),onConfirm:this.bannedUser.bind(this,l.status),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},I.a.createElement(p["a"],{type:"primary",style:{marginLeft:30},icon:"stop"},0===l.status?"\u542f\u7528\u672c\u8d26\u6237":"\u7981\u7528\u672c\u8d26\u6237")))))),I.a.createElement("div",{className:j.a.content},I.a.createElement(K["a"],i()({},r,{style:{width:"80%"}}),I.a.createElement(W,{label:"\u624b\u673a"},t("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},{pattern:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,message:"\u624b\u673a\u53f7\u4e0d\u7b26\u5408\u89c4\u8303"}]})(I.a.createElement(u["a"],{disabled:!!this.id,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),I.a.createElement(W,{label:"\u90ae\u7bb1"},t("email",{rules:[{pattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1"}]})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),I.a.createElement(W,{label:"\u7528\u6237\u59d3\u540d"},t("fullName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d"}]})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d"}))),I.a.createElement(W,{label:"\u8d26\u6237\u8bf4\u660e"},t("accountDescription",{})(I.a.createElement(u["a"].TextArea,{placeholder:"\u8bf7\u586b\u5199\u8d26\u6237\u8bf4\u660e",style:{minHeight:100}})))),I.a.createElement("div",{className:j.a.upload},I.a.createElement("div",{style:{margin:10}},"\u8d26\u6237\u5934\u50cf"),I.a.createElement(c["a"],{src:this.state.userPhoto?this.state.userPhoto:l.head?l.head:"",size:100}),I.a.createElement(Y["a"],{Button:I.a.createElement(p["a"],{style:{marginTop:20}},I.a.createElement(h["a"],{type:"upload"}),"\u4fee\u6539\u5934\u50cf"),onChange:function(t){return e.handleChange(t)},showUploadList:!1}))),I.a.createElement("div",{className:j.a.bottom},I.a.createElement("div",{className:j.a.buttons,style:{position:"relative"}},I.a.createElement(p["a"],{onClick:this.handleCancel.bind(this)},"\u53d6\u6d88"),I.a.createElement(p["a"],{type:"primary",loading:n,onClick:this.handleSubmit},"\u63d0\u4ea4"))))}}]),t}(B["Component"]),r=o))||r)||r)||r)},fNeP:function(e,t,a){e.exports={container:"container___2sIWS",empty:"empty___3IkM0",crumb:"crumb___1MvXp",content:"content___mu1Gd",input:"input___34inB",editor:"editor___1mFXj",span:"span___rey9x",upload:"upload___2aDu8",TreeNode:"TreeNode___1cuZT",contentTwo:"contentTwo___1I9HY",bottom:"bottom___1zGU7",buttons:"buttons___2BFTj",inputFlex:"inputFlex___BaxJO"}}}]);