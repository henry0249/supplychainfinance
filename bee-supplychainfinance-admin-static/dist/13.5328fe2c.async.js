(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{h9SI:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return P});a("5NDa");var n,o=a("5rEg"),l=(a("P2fV"),a("NJEC")),s=(a("+L6B"),a("2/Rp")),i=(a("sPJy"),a("bE4q")),u=(a("miYZ"),a("tsqr")),c=a("2Taf"),r=a.n(c),d=a("vZ4D"),m=a.n(d),g=a("l4Ni"),h=a.n(g),f=a("ujKo"),p=a.n(f),v=a("MhPg"),y=a.n(v),C=(a("OaEy"),a("2fM7")),E=(a("y8nQ"),a("Vl3Y")),b=a("q1tI"),k=a.n(b),w=a("/5eh"),N=a.n(w),S=a("3a4m"),j=a.n(S),I=a("wY1l"),T=a.n(I),M=a("bKel"),D=a.n(M),G=a("LjcA"),O=a("Xa26"),q=E["a"].Item,L=C["a"].Option,P=D()(n=function(e){function t(e){var a;return r()(this,t),a=h()(this,p()(t).call(this,e)),a.state={currentPage:1,pageSize:10,totalPage:0,totalRecords:0,cloumns:[],cloumnsData:null,triggerTypes:[],data:{businessMode:0,subjectName:""},goods:[]},a.id=a.props.location.query.id||!1,a}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this;this.getSysCodeInfo();var t=this.props.location.query.id;t?this.findLowGradeConfig(t,function(t){e.findUpdateCloumns(t,!0)}):this.findUpdateCloumns()}},{key:"getSysCodeInfo",value:function(){var e=this;Object(O["c"])("HP").then(function(t){0===t.code&&t.data&&t.data.length>0&&e.setState({goods:t.data})})}},{key:"findUpdateCloumns",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(G["c"])(t).then(function(n){0===n.code?e.state.cloumnsData&&a?e.setState({cloumns:n.data}):e.setState({cloumns:n.data,cloumnsData:V(n.data)}):e.setState({cloumns:[]}),Object(G["e"])(t).then(function(t){0===t.code?e.setState({triggerTypes:t.data}):e.setState({triggerTypes:[]})})})}},{key:"getTriggerType",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0;Object(G["e"])(t).then(function(t){0===t.code?e.setState({cloumns:t.data},function(){a&&a()}):e.setState({cloumns:[]})})}},{key:"findLowGradeConfig",value:function(e,t){var a=this;Object(G["b"])(e).then(function(e){if(0===e.code){var n={};e.data.updateColumnInfo&&e.data.updateColumnInfo.length&&(n=J(e.data.updateColumnInfo)),a.setState({cloumnsData:n,data:{businessMode:e.data.businessMode,subjectName:e.data.subjectName}},function(){t&&t(e.data.businessMode)})}else a.setState({cloumns:[]})})}},{key:"valueChange",value:function(e,t){var a=this.state.data;a[e]=t,this.setState({data:a}),"businessMode"===e&&this.findUpdateCloumns(t)}},{key:"cloumnsChange",value:function(e,t,a){var n=this.state.cloumnsData;n["data".concat(e)][t]=a,this.setState({cloumnsData:n})}},{key:"save",value:function(){var e=this.state,t=e.cloumnsData,a=e.data,n=a.businessMode,o=a.subjectName,l=[];for(var s in t)l.push(t[s]);var i={columnRQList:l,businessMode:n,subjectName:o};this.props.location.query.id&&(i.lowConfigMasterId=this.props.location.query.id),Object(G["f"])(i).then(function(e){0===e.code?u["a"].success(e.msg,1.5,function(){j.a.replace("/lowGradeConfig")}):u["a"].error(e.msg)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.cloumns,n=t.cloumnsData,u=t.triggerTypes,c=t.data,r=c.businessMode,d=c.subjectName,m=t.goods;return k.a.createElement("div",{className:N.a.container},k.a.createElement("div",{className:N.a.crumb},k.a.createElement(i["a"],{className:N.a.breadcrumb},k.a.createElement(i["a"].Item,null,k.a.createElement(T.a,{to:"/lowGradeConfig"},"\u89c4\u5219\u914d\u7f6e")),k.a.createElement(i["a"].Item,null,d)),k.a.createElement("div",{className:N.a.title},"\u89c4\u5219\u914d\u7f6e\u8be6\u60c5"),k.a.createElement("div",{className:N.a.btnBox},k.a.createElement(l["a"],{title:"\u9000\u51fa\u540e\u5185\u5bb9\u5c06\u4e0d\u80fd\u4fdd\u5b58",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:function(){j.a.push("/lowGradeConfig")}},k.a.createElement(s["a"],{type:"primary",size:"large"},"\u53d6 \u6d88")),k.a.createElement(s["a"],{style:{marginLeft:10},size:"large",onClick:this.save.bind(this)},"\u4fdd \u5b58")),k.a.createElement(E["a"],{layout:"inline"},k.a.createElement(q,{label:"\u4e1a\u52a1\u7c7b\u578b"},k.a.createElement(C["a"],{disabled:!!this.id,style:{width:300},onChange:function(t){return e.valueChange("businessMode",t)},placeholder:"\u8bf7\u9009\u62e9",value:r},k.a.createElement(L,{value:0},"\u59d4\u6258\u91c7\u8d2d"),k.a.createElement(L,{value:1},"\u59d4\u6258\u9500\u552e"),k.a.createElement(L,{value:4},"\u5927\u578b\u4f01\u4e1a\u59d4\u6258\u91c7\u8d2d"))),k.a.createElement(q,{label:"\u6807\u7684\u7269\u7c7b\u578b"},k.a.createElement(C["a"],{style:{width:300},placeholder:"\u8bf7\u9009\u62e9\u6807\u7684\u7269\u7c7b\u578b",onChange:function(t){return e.valueChange("subjectName",t)},value:d||[]},m&&m.length>0?m.map(function(e){return k.a.createElement(L,{key:e.sysCodeVal,value:e.sysCodeVal},e.sysCodeVal)}):null)))),k.a.createElement("div",{className:N.a.body},k.a.createElement("span",{className:N.a.title},"\u4f4e\u5206\u89c4\u5219\u914d\u7f6e"),k.a.createElement(E["a"],{layout:"inline"},a&&a.length>0&&a.map(function(t){return k.a.createElement("div",{className:N.a.top,key:t.id},k.a.createElement(q,null,k.a.createElement(C["a"],{style:{width:150},placeholder:"\u8bf7\u9009\u62e9",value:n["data".concat(t.id)].triggerType,onChange:function(a){return e.cloumnsChange(t.id,"triggerType",a)}},u&&u.length>0&&u.map(function(e){return k.a.createElement(L,{key:e.sysCode,value:e.sysCode},e.sysCodeDesc)}))),"\u5206\u6570\u4f4e\u4e8e \xa0",k.a.createElement(q,null,k.a.createElement(o["a"],{style:{width:100},value:n["data".concat(t.id)].triggerGrade,onChange:function(a){return e.cloumnsChange(t.id,"triggerGrade",a.target.value)}})),"\u5206\uff0c\u5219",k.a.createElement("span",{style:{minWidth:150,fontWeight:600}},t.updateColumnName),"\u5f3a\u5236\u6539\u4e3a\xa0",t.options?k.a.createElement(q,null,k.a.createElement(C["a"],{style:{width:250},placeholder:"\u8bf7\u9009\u62e9",value:n["data".concat(t.id)].updateContent,onChange:function(a){return e.cloumnsChange(t.id,"updateContent",a)}},t.options.map(function(e){return k.a.createElement(L,{key:e.key,value:e.key+""},e.desc)}))):k.a.createElement(o["a"],{style:{width:250},value:n["data".concat(t.id)].updateContent,onChange:function(a){return e.cloumnsChange(t.id,"updateContent",a.target.value)}}),"\xa0",k.a.createElement("span",null,t.unit))}))))}}]),t}(b["Component"]))||n,V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(function(e){t["data".concat(e.id)]={triggerGrade:"",triggerType:"",updateColumnId:e.id,updateContent:""}}),t},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(function(e){t["data".concat(e.updateColumnId)]={triggerGrade:e.triggerGrade,triggerType:void 0!==e.triggerType?e.triggerType+"":"",updateColumnId:e.updateColumnId,updateContent:e.updateContent}}),t}}}]);