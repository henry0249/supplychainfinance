(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{"fk+W":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("fOrg");var r=l(a("+KLJ"));a("IzEo");var s=l(a("bx4M"));a("14J3");var u=l(a("BMrR"));a("jCWc");var i=l(a("kPKH"));a("miYZ");var d=l(a("tsqr")),p=l(a("p0pE")),c=l(a("2Taf")),o=l(a("vZ4D")),m=l(a("l4Ni")),f=l(a("ujKo")),y=l(a("rlhR")),I=l(a("MhPg"));a("y8nQ");var g,h,E,D,b=l(a("Vl3Y")),F=n(a("q1tI")),C=a("Hg0r"),O=a("Kvkj"),B=a("zHmJ"),v=l(a("3a4m")),T=a("dtw8"),N=l(a("hx5r")),w=(g=b["default"].create(),h=(0,C.connect)(function(e){var t=e.incomingstep;e.loading;return{incomingstep:t}}),(0,T.withRouter)(E=g(E=h((D=function(e){function t(e){var a;return(0,c["default"])(this,t),a=(0,m["default"])(this,(0,f["default"])(t).call(this,e)),a.onRemoveFile=function(e){var t="",l=[],n=a.props.dispatch,r=a.state,s=r.file,u=r.applyId;e.response&&0===e.response.code&&(t=e.response.data.access_url,l=s.filter(function(e){return e.fileUrl!==t})),a.setState({file:l}),n({type:"incomingstep/setFirstData",payload:(0,p["default"])({},a.props.incomingstep.buyFirstPartOne,{addFileInfoList:l,applyId:u})})},a.fileUpload=function(e){var t=a.state.applyId,l={fileName:e.name,fileUrl:e.value},n=[].concat(a.state.file);n.push(l),a.setState({file:n}),a.props.dispatch({type:"incomingstep/setFirstData",payload:(0,p["default"])({},a.props.incomingstep.buyFirstPartOne,{addFileInfoList:n,applyId:t})})},a.onValidateForm=function(e,t){var l=a.state,n=l.getData,r=(l.err,l.isShow,a.props.form),s=(r.getFieldDecorator,r.validateFields),u=(r.getFieldValue,a.props),i=u.dispatch,c=u.incomingstep,o=a.props.location.query,m=o.type,f=o.applyId,I=(o.id,o.entrustBuyId);(0,y["default"])(a);s(function(l,r){if("save"===e&&(l=!1,r=a.props.form.getFieldsValue()),l){t&&t();var s="";Object.values(l)[0],s=Object.values(l)[0].errors[0].message,d["default"].error(s)}else{var u={};switch(m){case"p":n.entrustBuyDetailDTO&&(r.clientCreditId=c.buyFirstPartOne.clientCreditId?c.buyFirstPartOne.clientCreditId:n.entrustBuyDetailDTO.clientCreditId?n.entrustBuyDetailDTO.clientCreditId:null,r.supplierCreditId=c.buyFirstPartOne.supplierCreditId?c.buyFirstPartOne.supplierCreditId:n.entrustBuyDetailDTO.supplierCreditId?n.entrustBuyDetailDTO.supplierCreditId:null);break;case"s":n.entrustSaleDetailDTO&&(r.clientCreditId=c.buyFirstPartOne.clientCreditId?c.buyFirstPartOne.clientCreditId:n.entrustSaleDetailDTO.clientCreditId?n.entrustSaleDetailDTO.clientCreditId:null,r.purchaserCreditId=c.buyFirstPartOne.purchaserCreditId?c.buyFirstPartOne.purchaserCreditId:n.entrustSaleDetailDTO.purchaserCreditId?n.entrustSaleDetailDTO.purchaserCreditId:null);break;case"w":n.financeStorageDetailDTO&&(r.clientCreditId=c.buyFirstPartOne.clientCreditId?c.buyFirstPartOne.clientCreditId:n.financeStorageDetailDTO.clientCreditId?n.financeStorageDetailDTO.clientCreditId:null);break;case"L":n.largeEntrustBuyDetailDTO&&(r.clientCreditId=c.buyFirstPartOne.clientCreditId?c.buyFirstPartOne.clientCreditId:n.largeEntrustBuyDetailDTO.clientCreditId?n.largeEntrustBuyDetailDTO.clientCreditId:null,r.supplierCreditId=c.buyFirstPartOne.supplierCreditId?c.buyFirstPartOne.supplierCreditId:n.largeEntrustBuyDetailDTO.supplierCreditId?n.largeEntrustBuyDetailDTO.supplierCreditId:null);default:break}switch(u=(0,p["default"])({},a.props.incomingstep.buyFirstPartOne,{applyId:f},r),m){case"p":i({type:"incomingstep/dataFirst",payload:(0,p["default"])({},u),callback:function(a,l,n){0===a?(t&&t(),"save"!==e?v["default"].push("/incoming/purchase/step2?type=".concat(m,"&applyId=").concat(f,"&id=").concat(n.id,"&entrustBuyId=").concat(I)):d["default"].success(l)):(t&&t(),d["default"].error(l),v["default"].push("/incoming/purchase/step1?type=".concat(m,"&applyId=").concat(f,"&entrustBuyId=").concat(I)))}});break;case"s":i({type:"incomingstep/dataFirst",payload:(0,p["default"])({},u),callback:function(a,l,n){0===a?(t&&t(),"save"!==e?v["default"].push("/incoming/purchase/step2?type=".concat(m,"&applyId=").concat(f,"&id=").concat(n.id,"&entrustBuyId=").concat(I)):d["default"].success(l)):(t&&t(),d["default"].error(l),v["default"].push("/incoming/purchase/step1?type=".concat(m,"&applyId=").concat(f,"&entrustBuyId=").concat(I)))}});break;case"w":i({type:"incomingstep/dataFirst",payload:(0,p["default"])({},u),callback:function(a,l,n){0===a?(t&&t(),"save"!==e?v["default"].push("/incoming/purchase/step2?type=".concat(m,"&applyId=").concat(f,"&id=").concat(n.id,"&entrustBuyId=").concat(I)):d["default"].success(l)):(t&&t(),d["default"].error(l),v["default"].push("/incoming/purchase/step1?type=".concat(m,"&applyId=").concat(f,"&entrustBuyId=").concat(I)))}});break;case"L":i({type:"incomingstep/dataFirst",payload:(0,p["default"])({},u),callback:function(a,l,n){0===a?(t&&t(),"save"!==e?v["default"].push("/incoming/purchase/step2?type=".concat(m,"&applyId=").concat(f,"&id=").concat(n.id,"&entrustBuyId=").concat(I)):d["default"].success(l)):(t&&t(),d["default"].error(l),v["default"].push("/incoming/purchase/step1?type=".concat(m,"&applyId=").concat(f,"&entrustBuyId=").concat(I)))}});default:break}}})},a.state={isProved:!0,type:"",headValue:!1,applyId:null,err:!0,clientValue:!1,getData:{},isShow:!1,file:[],entrustBuyId:null},a.com=null,a}return(0,I["default"])(t,e),(0,o["default"])(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({type:this.props.location.query.type,applyId:this.props.location.query.applyId,entrustBuyId:this.props.location.query.entrustBuyId,projectSignificance:null},function(){var t=e.state,a=t.type,l=t.applyId;switch(a){case"p":e.props.dispatch({type:"incomingstep/setBuyDetailData",payload:l,callback:function(t,a,l){0===t?e.setState({getData:l,isShow:!0}):e.setState({isShow:!0})}});break;case"s":e.props.dispatch({type:"incomingstep/setSaleDetailData",payload:l,callback:function(t,a,l){0===t?e.setState({getData:l,isShow:!0}):e.setState({isShow:!0})}});break;case"w":e.props.dispatch({type:"incomingstep/setStorageDetailData",payload:l,callback:function(t,a,l){0===t?e.setState({getData:l,isShow:!0}):e.setState({isShow:!0})}});break;case"L":e.props.dispatch({type:"incomingstep/setLargeBuyDetailData",payload:l,callback:function(t,a,l){0===t?e.setState({getData:l,isShow:!0}):e.setState({isShow:!0})}});default:break}var n={};switch(a){case"p":case"L":n={clientAbbre:"",clientAddress:"",clientCorporation:"",clientFoundingTime:"",clientName:"",clientRegistCapital:"",projectSignificance:"",supplierAbbre:"",supplierAddress:"",supplierCorporation:"",supplierFoundingTime:"",supplierName:"",supplierRegistCapital:""};break;case"s":n={clientAbbre:"",clientAddress:"",clientCorporation:"",clientFoundingTime:"",clientName:"",clientRegistCapital:"",projectSignificance:"",purchaserAbbre:"",purchaserAddress:"",purchaserCorporation:"",purchaserFoundingTime:"",purchaserName:"",purchaserRegistCapital:""};break;case"w":n={clientAbbre:"",clientAddress:"",clientCorporation:"",clientFoundingTime:"",clientName:"",clientRegistCapital:"",projectSignificance:""};break;default:break}e.props.dispatch({type:"incomingstep/setFirstData",payload:(0,p["default"])({},n,{applyId:l})})})}},{key:"removeFile",value:function(){var e=this.props.dispatch,t=this.state.applyId;e({type:"incomingstep/setFirstData",payload:(0,p["default"])({},this.props.incomingstep.buyFirstPartOne,{addFileInfoList:[],applyId:t})})}},{key:"render",value:function(){var e=this.state,t=(e.isProved,e.type),a=e.err,l=e.applyId,n=e.headValue,d=e.getData,p=e.isShow,c=e.entrustBuyId,o=this.props,m=(o.form,o.dispatch,o.data,"");return d.entrustBuyDTO&&(m=d.entrustBuyDTO.applyCompanyName),F["default"].createElement(F.Fragment,null,p?F["default"].createElement(B.ReportHeader,{showInput:!0,title:m,step:1,type:t,getData:d,applyId:l,rcForm:this.props.form,onValidateFormOne:this.onValidateForm}):null,d.entrustBuyDTO?F["default"].createElement(F.Fragment,null,F["default"].createElement("div",{className:N["default"].application},F["default"].createElement(s["default"],null,F["default"].createElement(F.Fragment,null,F["default"].createElement("div",{className:N["default"].applicationBox},F["default"].createElement("h3",{className:N["default"].applicationHead},"\u7533\u8bf7\u8be6\u60c5"),F["default"].createElement("div",{className:N["default"].applicationDetail},F["default"].createElement(u["default"],null,F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u59d4\u6258\u4f01\u4e1a:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&d.entrustBuyDTO.applyCompanyName?d.entrustBuyDTO.applyCompanyName:"\u65e0"))),"w"===t?null:F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6838\u5fc3\u4f01\u4e1a:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&d.entrustBuyDTO.upDownstreamName?d.entrustBuyDTO.upDownstreamName:"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u4e1a\u52a1\u6a21\u5f0f:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&(d.entrustBuyDTO.businessMode||0===d.entrustBuyDTO.businessMode)?0===d.entrustBuyDTO.businessMode?"\u59d4\u6258\u91c7\u8d2d":1===d.entrustBuyDTO.businessMode?"\u59d4\u6258\u9500\u552e":2===d.entrustBuyDTO.businessMode?"\u91d1\u878d\u4ed3\u50a8":"\u5927\u4f01\u4e1a\u59d4\u6258\u91c7\u8d2d":"\u65e0"))))),F["default"].createElement("div",{className:N["default"].applicationDetail},F["default"].createElement(u["default"],null,F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6807\u7684\u7269:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&d.entrustBuyDTO.tradeGoodsDetail?d.entrustBuyDTO.tradeGoodsDetail:"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6570\u91cf:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&d.entrustBuyDTO.quantity?d.entrustBuyDTO.quantity:"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u9884\u8ba1\u91d1\u989d:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},p&&d.entrustBuyDTO.estimatedAmount?d.entrustBuyDTO.estimatedAmount:"\u65e0"))))))))),d.rejectReason?F["default"].createElement("div",{className:N["default"].warningBack},F["default"].createElement(r["default"],{message:"\u8be5\u7acb\u9879\u62a5\u544a\u88ab\u9000\u56de!",description:F["default"].createElement(F.Fragment,null,F["default"].createElement("div",{style:{float:"left"}},"\u9000\u56de\u539f\u56e0\uff1a"),F["default"].createElement("pre",null,d.rejectReason),d.lowRuleDetail?F["default"].createElement("pre",null,d.lowRuleDetail.split("&d;").join("\r\n")):""),type:"warning",showIcon:!0})):null):F["default"].createElement(F.Fragment,null,F["default"].createElement("div",{className:N["default"].application},F["default"].createElement(s["default"],null,F["default"].createElement(F.Fragment,null,F["default"].createElement("div",{className:N["default"].applicationBox},F["default"].createElement("h3",{className:N["default"].applicationHead},"\u7533\u8bf7\u8be6\u60c5"),F["default"].createElement("div",{className:N["default"].applicationDetail},F["default"].createElement(u["default"],null,F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u59d4\u6258\u4f01\u4e1a:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6838\u5fc3\u4f01\u4e1a:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u4e1a\u52a1\u6a21\u5f0f:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0"))))),F["default"].createElement("div",{className:N["default"].applicationDetail},F["default"].createElement(u["default"],null,F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6807\u7684\u7269:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u6570\u91cf:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0"))),F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{className:N["default"].detailItem},F["default"].createElement("span",null,"\u9884\u8ba1\u91d1\u989d:"),F["default"].createElement("span",{style:{marginLeft:"10px"}},"\u65e0")))))))))),p?"p"===t?F["default"].createElement(F.Fragment,null,F["default"].createElement(B.Client,{applyId:l,headValue:n,typeItem:"",getData:d,type:t,hasPhone:!0,rcForm:this.props.form,entrustBuyId:c}),F["default"].createElement(B.Client,{applyId:l,companyType:"\u4f9b\u5e94\u5546",companyNickHead:"\u4f9b\u8d27\u4f01\u4e1a\u7b80\u79f0",dataHead:"supply",typeItem:"supply",getData:d,type:t,rcForm:this.props.form,entrustBuyId:c})):"s"===t?F["default"].createElement(F.Fragment,null,F["default"].createElement(B.Client,{applyId:l,headValue:n,typeItem:"",getData:d,type:t,hasPhone:!0,rcForm:this.props.form,entrustBuyId:c}),F["default"].createElement(B.Client,{applyId:l,companyType:"\u91c7\u8d2d\u5546",companyNickHead:"\u91c7\u8d2d\u4f01\u4e1a\u7b80\u79f0",dataHead:"purchase",typeItem:"purchase",getData:d,type:t,rcForm:this.props.form,entrustBuyId:c})):"w"===t?F["default"].createElement(F.Fragment,null,F["default"].createElement(B.Client,{applyId:l,headValue:n,dataHead:"moneySave",typeItem:"",getData:d,hasPhone:!0,rcForm:this.props.form,entrustBuyId:c,type:t})):"L"===t?F["default"].createElement(F.Fragment,null,F["default"].createElement(B.Client,{applyId:l,headValue:n,typeItem:"",getData:d,type:t,hasPhone:!0,rcForm:this.props.form,entrustBuyId:c}),F["default"].createElement(B.Client,{applyId:l,companyType:"\u4f9b\u5e94\u5546",companyNickHead:"\u4f9b\u8d27\u4f01\u4e1a\u7b80\u79f0",dataHead:"supply",typeItem:"supply",getData:d,type:t,rcForm:this.props.form,entrustBuyId:c})):null:null,F["default"].createElement("div",{className:N["default"].upLoadFile},F["default"].createElement(s["default"],null,F["default"].createElement(u["default"],null,F["default"].createElement(i["default"],{sm:8,xs:2},F["default"].createElement("span",{style:{marginRight:"10px"}},"\u8865\u5145\u8d44\u6599\u4e0a\u4f20:"),F["default"].createElement(O.FileUpload,{onChange:this.fileUpload.bind(this),labelInValue:!0,upLoadProps:{onRemove:this.onRemoveFile},getComponent:this.getComponent}),F["default"].createElement("p",{style:{color:"#ccc",paddingLeft:"100px"}},"\u652f\u6301\u6269\u5c55\u540d\uff1a.rar .zip .doc .docx .pdf .jpg..."))))),F["default"].createElement(B.ReportBottom,{step:1,broad:3,type:t,err:a,applyId:l,entrustBuyId:c,onValidateFormOne:this.onValidateForm}))}}]),t}(F.Component),E=D))||E)||E)||E),S=w;t["default"]=S}}]);