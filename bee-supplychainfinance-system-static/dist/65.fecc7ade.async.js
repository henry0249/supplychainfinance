(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{Kex3:function(e,t,a){e.exports={container:"container___nGpym",header:"header___2gYMd",select:"select___3uDPY",body:"body___23i9F",moadlForm:"moadlForm___eySvZ"}},uBDQ:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=l(a("q1tI"));a("g9YV");var d=n(a("wCAj"));a("14J3");var u=n(a("BMrR"));a("+L6B");var i=n(a("2/Rp"));a("jCWc");var c=n(a("kPKH"));a("sPJy");var o=n(a("bE4q"));a("Pwec");var s=n(a("CtXQ"));a("5NDa");var f=n(a("5rEg"));a("2qtc");var m=n(a("kLXV"));a("miYZ");var p=n(a("tsqr")),h=n(a("2Taf")),v=n(a("vZ4D")),y=n(a("l4Ni")),E=n(a("ujKo")),g=n(a("rlhR")),b=n(a("MhPg"));a("OaEy");var _=n(a("2fM7"));a("y8nQ");var k,S,w,A=n(a("Vl3Y")),F=n(a("3a4m")),I=n(a("wY1l")),C=n(a("bKel")),N=n(a("Kex3")),M=a("Zf9q"),q=A["default"].Item,R=_["default"].Option,x=(k=A["default"].create(),(0,C["default"])(S=k((w=function(e){function t(){var e,a;(0,h["default"])(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,y["default"])(this,(e=(0,E["default"])(t)).call.apply(e,[this].concat(n))),a.state={data:[],editId:null,name:null,name_add:null,names:[],attributes:{},current:1,page:{totalPage:0,totalRecords:0},visible:!1},a.changeName=function(e){var t=a.props.form.resetFields;t(["sourceAddress"]),a.setState({name:e})},a.changeNameAdd=function(e){var t=a.props.form.resetFields;t(["sourceAddress_add"]),a.setState({name_add:e})},a.handleQuery=function(e){var t=a.props.form.validateFields;t(["tast"],function(t,l){if(!t){if(!l.tast||!e)return p["default"].warning("\u8bf7\u5148\u9009\u62e9\u6807\u7684\u7269\u548c\u6765\u6e90");var n={tast:l.tast,sourceAddress:e};(0,M.getSpecificationList)(n).then(function(e){0===e.code?a.setState({data:e.data,page:{totalPage:Math.ceil(e.data.length/10),totalRecords:e.data.length},editId:null,visible:!1}):p["default"].error("\u83b7\u53d6\u89c4\u683c\u5217\u8868\u5931\u8d25\uff1a"+e.msg)})}})},a.handleSave=function(e,t){var l=a.props.form.validateFields,n=(0,g["default"])(a);l(t?["specification","sourceAddress"]:["tast_add","sourceAddress_add","specification_add","sourceAddress"],function(a,l){if(!a){var r={};if(t){if(!specification)return p["default"].warning("\u8bf7\u8f93\u5165\u89c4\u683c\u540d\u5b57");r={id:e,specification:l.specification}}else r={tast:l.tast_add,sourceAddress:l.sourceAddress_add,specification:l.specification_add};(0,M.saveSpecificationInfo)(r).then(function(e){0===e.code?(p["default"].success("\u4fdd\u5b58\u89c4\u683c\u6210\u529f"),n.handleQuery(l.sourceAddress)):p["default"].error("\u4fdd\u5b58\u89c4\u683c\u5931\u8d25\uff1a"+e.msg)})}})},a.handleDelte=function(e){var t=a.props.form.validateFields,l=(0,g["default"])(a);t(["tast","sourceAddress"],function(t,a){if(!t){if(e.isUse)return m["default"].error({title:"\u5220\u9664\u6807\u7684\u7269\u89c4\u683c",content:"\u8be5\u89c4\u683c\u5df2\u542b\u6709\u4ef7\u683c\u6570\u636e\uff0c\u65e0\u6cd5\u5220\u9664\uff01"});m["default"].confirm({title:"\u5220\u9664\u6807\u7684\u7269\u89c4\u683c",content:"\u5220\u9664\u6807\u7684\u7269\u201c".concat(a.tast,"\u201d\u7684\u89c4\u683c\u201c").concat(e.specification,"\u201d\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){(0,M.deleteInfo)(e.id).then(function(e){0===e.code?(p["default"].success("\u5220\u9664\u6210\u529f"),l.handleQuery(a.sourceAddress)):p["default"].error("\u5220\u9664\u5931\u8d25\uff1a"+e.msg)})}})}})},a}return(0,b["default"])(t,e),(0,v["default"])(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.form.setFieldsValue,a=this.props.location.query,l=a.key,n=a.name;n&&(t({tast:n}),this.setState({name:n})),(0,M.getSubjectMatterAttribute)({typeName:l,attributeType:2}).then(function(t){if(0===t.code){var a=[],l={};t.data.forEach(function(e){a.push(e.name),l[e.name]=e.attributes}),e.setState({names:a,attributes:l})}else p["default"].error("\u83b7\u53d6\u6807\u7684\u7269\u89c4\u683c\u7b5b\u9009\u9879\u5931\u8d25\uff1a"+t.msg)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=(this.props.location.query.key,this.state),l=a.data,n=a.editId,p=a.name,h=a.name_add,v=a.names,y=a.attributes,E=a.current,g=a.page,b=a.visible,k=[{title:"\u89c4\u683c\u540d\u79f0",dataIndex:"specification",key:"specification",render:function(e,a,l){return null!==n&&n===a.id?r["default"].createElement(q,null,t("specification",{initialValue:e})(r["default"].createElement(f["default"],{style:{width:240},placeholder:"\u89c4\u683c\u540d\u79f0"}))):e},width:"40%"},{title:"\u662f\u5426\u4f7f\u7528",dataIndex:"isUse",key:"isUse",render:function(e,t){return e?r["default"].createElement(s["default"],{style:{color:"#52C41A",fontSize:17},type:"check-circle",theme:"filled"}):r["default"].createElement(s["default"],{style:{color:"#F5222D",fontSize:17},type:"close-circle",theme:"filled"})},width:"20%"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a,l){return null!==n&&n===a.id?r["default"].createElement("div",null,r["default"].createElement("span",{onClick:e.handleSave.bind(e,a.id,!0),style:{fontSize:14,color:"#1890FF",cursor:"pointer",marginRight:12}},"\u4fdd\u5b58"),r["default"].createElement("span",{onClick:function(){return e.setState({editId:null})},style:{fontSize:14,color:"#1890FF",cursor:"pointer"}},"\u53d6\u6d88")):r["default"].createElement("div",null,r["default"].createElement("span",{onClick:function(){return e.setState({editId:a.id})},style:{fontSize:14,color:"#1890FF",cursor:"pointer",marginRight:12}},"\u7f16\u8f91\u89c4\u683c"),r["default"].createElement("span",{onClick:e.handleDelte.bind(e,a),style:a.isUse?{fontSize:14,color:"rgba(0,0,0,0.45)",cursor:"pointer"}:{fontSize:14,color:"#1890FF",cursor:"pointer"}},"\u5220\u9664"))},width:"40%"}];return r["default"].createElement("div",{className:N["default"].container},r["default"].createElement("div",{className:N["default"].header},r["default"].createElement(o["default"],null,r["default"].createElement(o["default"].Item,null,r["default"].createElement(I["default"],{to:"/home"},"\u9996\u9875")),r["default"].createElement(o["default"].Item,null,r["default"].createElement(I["default"],{to:"/ods/macrofinance/MacroIndex"},"\u6570\u636e\u4ed3\u5e93")),r["default"].createElement(o["default"].Item,null,r["default"].createElement(I["default"],{to:"/ods/subjectMatterInfo"},"\u6807\u7684\u7269\u4fe1\u606f")),r["default"].createElement(o["default"].Item,null,r["default"].createElement(I["default"],{to:"/ods/subjectMatterInfo/list"},"\u6807\u7684\u5217\u8868")),r["default"].createElement(o["default"].Item,null,"\u89c4\u683c\u7ba1\u7406")),r["default"].createElement("h2",null,"\u6807\u7684\u7269\u89c4\u683c\u6570\u636e"),r["default"].createElement(u["default"],{type:"flex",justify:"space-between",align:"middle"},r["default"].createElement(c["default"],null,r["default"].createElement("span",null,"\u64cd\u4f5c\uff1a\u53ef\u7f16\u8f91\u3001\u6dfb\u52a0\u548c\u5220\u9664\u6307\u5b9a\u6807\u7684\u7269\u7684\u89c4\u683c\u5c5e\u6027\u3002")),r["default"].createElement(c["default"],null,r["default"].createElement(i["default"],{onClick:function(){return e.setState({visible:!0})},icon:"plus",type:"primary",style:{marginRight:16}},"\u6dfb\u52a0\u65b0\u89c4\u683c"),r["default"].createElement(i["default"],{onClick:function(){return F["default"].goBack()},icon:"rollback",type:"primary"},"\u8fd4\u56de")))),r["default"].createElement("div",{className:N["default"].select},r["default"].createElement(q,{label:"\u9009\u62e9\u6807\u7684\u7269"},t("tast")(r["default"].createElement(_["default"],{style:{width:240},placeholder:"\u8bf7\u9009\u62e9",onChange:function(t){return e.changeName(t)}},0!==v.length&&v.map(function(e,t){return r["default"].createElement(R,{value:e,key:t},e)}))),t("sourceAddress")(r["default"].createElement(_["default"],{style:{width:240,marginLeft:16},placeholder:"\u9009\u62e9\u6807\u7684\u7269\u6765\u6e90",onSelect:function(t){return e.handleQuery(t)}},p&&y[p]&&0!==y[p].length&&y[p].map(function(e,t){return r["default"].createElement(R,{value:e,key:t},e)}))))),r["default"].createElement("div",{className:N["default"].body},r["default"].createElement(d["default"],{rowKey:"id",columns:k,dataSource:l,pagination:{showQuickJumper:!0,current:E,pageSize:10,total:g.totalRecords,onChange:this.currentChange,showTotal:function(e,t){return"\u5171 ".concat(g.totalRecords," \u6761\u8bb0\u5f55 \u7b2c ").concat(E," / ").concat(g.totalPage," \u9875")}}})),r["default"].createElement(m["default"],{title:"\u6dfb\u52a0\u65b0\u89c4\u683c",visible:b,onOk:this.handleSave.bind(this,null,!1),onCancel:function(){return e.setState({visible:!1})}},r["default"].createElement(A["default"],{className:N["default"].moadlForm},r["default"].createElement(q,{label:"\u6807\u7684\u7269\u540d\u79f0"},t("tast_add",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7684\u7269\u540d\u79f0"}]})(r["default"].createElement(_["default"],{style:{width:240},placeholder:"\u8bf7\u9009\u62e9",onChange:function(t){return e.changeNameAdd(t)}},0!==v.length&&v.map(function(e,t){return r["default"].createElement(R,{value:e,key:t},e)})))),r["default"].createElement(q,{label:"\u6807\u7684\u7269\u6765\u6e90"},t("sourceAddress_add",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7684\u7269\u6765\u6e90"}]})(r["default"].createElement(_["default"],{style:{width:240},placeholder:"\u8bf7\u9009\u62e9\u6807\u7684\u7269\u6765\u6e90"},h&&0!==y[h].length&&y[h].map(function(e,t){return r["default"].createElement(R,{value:e,key:t},e)})))),r["default"].createElement(q,{label:"\u89c4\u683c\u540d\u79f0"},t("specification_add",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89c4\u683c\u540d\u79f0"}]})(r["default"].createElement(f["default"],{style:{width:240},placeholder:"\u8bf7\u8f93\u5165\u89c4\u683c\u540d\u79f0"}))))))}}]),t}(r.Component),S=w))||S)||S);t["default"]=x}}]);